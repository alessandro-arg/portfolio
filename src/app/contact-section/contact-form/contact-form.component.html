<div class="form_container">
  <form
    (ngSubmit)="onSubmit(contactFrom)"
    #contactFrom="ngForm"
    autocomplete="off"
  >
    <div
      class="name_wrapper"
      [class.invalid]="!showInput.name && isFieldInvalid(name)"
    >
      <label
        class="name_label"
        [class.invalid]="!showInput.name && isFieldInvalid(name)"
        for="name"
      >
        {{ "CONTACT_FORM.LABEL_NAME" | translate }}</label
      >
      <input
        [(ngModel)]="contactData.name"
        #nameInput
        #name="ngModel"
        minlength="4"
        type="text"
        id="name"
        name="name"
        autocomplete="off"
        required
        (focus)="focusedField = 'name'"
        (blur)="onInputBlur(name, 'name')"
        [attr.placeholder]="
          focusedField === 'name'
            ? ''
            : ('CONTACT_FORM.PLACEHOLDER_NAME' | translate)
        "
        [hidden]="!showInput.name && isFieldInvalid(name)"
      />
      @if (!showInput.name && isFieldInvalid(name)) {
      <span class="input_error" (click)="onShowInput('name')">
        {{ "CONTACT_FORM.ERROR_NAME" | translate }}
      </span>
      }
    </div>
    <div
      class="email_wrapper"
      [class.invalid]="!showInput.email && isFieldInvalid(email)"
    >
      <label
        class="email_label"
        [class.invalid]="!showInput.email && isFieldInvalid(email)"
        for="email"
        >{{ "CONTACT_FORM.LABEL_EMAIL" | translate }}</label
      >
      <input
        [(ngModel)]="contactData.email"
        #emailInput
        #email="ngModel"
        type="email"
        id="email"
        name="email"
        pattern="[a-zA-Z0-9._%+\-]+@[a-zA-Z0-9.\-]+\.[a-zA-Z]{2,}"
        autocomplete="off"
        required
        (focus)="focusedField = 'email'"
        (blur)="onInputBlur(email, 'email')"
        [attr.placeholder]="
          focusedField === 'email'
            ? ''
            : ('CONTACT_FORM.PLACEHOLDER_EMAIL' | translate)
        "
        [hidden]="!showInput.email && isFieldInvalid(email)"
      />
      @if (!showInput.email && isFieldInvalid(email)) {
      <span class="input_error" (click)="onShowInput('email')">
        {{ "CONTACT_FORM.ERROR_EMAIL" | translate }}
      </span>
      }
    </div>
    <div
      class="message_wrapper"
      [class.invalid]="!showInput.message && isFieldInvalid(message)"
    >
      <label
        class="message_label"
        [class.invalid]="!showInput.message && isFieldInvalid(message)"
        for="message"
        >{{ "CONTACT_FORM.LABEL_MESSAGE" | translate }}</label
      >
      <input
        [(ngModel)]="contactData.message"
        #messageInput
        #message="ngModel"
        minlength="8"
        type="text"
        id="message"
        name="message"
        autocomplete="off"
        required
        (focus)="focusedField = 'message'"
        (blur)="onInputBlur(message, 'message')"
        [attr.placeholder]="
          focusedField === 'message'
            ? ''
            : ('CONTACT_FORM.PLACEHOLDER_MESSAGE' | translate)
        "
        [hidden]="!showInput.message && isFieldInvalid(message)"
      />
      @if (!showInput.message && isFieldInvalid(message)) {
      <span class="input_error" (click)="onShowInput('message')">
        {{ "CONTACT_FORM.ERROR_MESSAGE" | translate }}
      </span>
      }
    </div>
    <span
      class="checkbox_error fields_error"
      [class.visible]="
        isFieldInvalid(message) || isFieldInvalid(email) || isFieldInvalid(name)
      "
      >{{ "CONTACT_FORM.ERROR_ALL_FIELDS" | translate }}</span
    >
    <div class="checkbox_wrapper">
      <div class="checkbox_box">
        <input
          #checkbox="ngModel"
          [(ngModel)]="contactData.checkbox"
          type="checkbox"
          id="checkbox"
          name="checkbox"
          required
        />
        <span class="custom_checkbox"></span>
      </div>
      <label class="checkbox_label" for="checkbox">
        {{ "CONTACT_FORM.PRIVACY_TEXT_PART1" | translate }}
        <a [routerLink]="'/privacy-policy'">
          {{ "CONTACT_FORM.PRIVACY_LINK" | translate }}
        </a>
        {{ "CONTACT_FORM.PRIVACY_TEXT_PART2" | translate }}
      </label>
    </div>
    <span
      class="checkbox_error"
      [class.visible]="!checkbox.valid && (checkbox.touched || checkbox.dirty)"
      >{{ "CONTACT_FORM.ERROR_PRIVACY" | translate }}</span
    >
    <span
      class="success_message"
      [class.visible]="successMessage"
      [innerHTML]="'CONTACT_FORM.SUCCESS' | translate"
    >
    </span>
    <div class="mobile_version">
      <div class="line_wrapper"></div>
      <input
        type="submit"
        [value]="'CONTACT_FORM.BUTTON_SUBMIT' | translate"
        [class.disabled]="!contactFrom.valid"
        [disabled]="!contactFrom.valid"
      />
    </div>
  </form>
</div>
